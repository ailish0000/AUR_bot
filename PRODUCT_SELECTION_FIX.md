# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –í–´–ë–û–†–ê –ü–†–û–î–£–ö–¢–û–í

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞**
–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–ª –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Ü–∏—Ñ—Ä—ã "1" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞.

### **–ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞ —Å –ø—Ä–æ–±–ª–µ–º–æ–π:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ—Å–æ–≤–µ—Ç—É–π –µ—â–µ –º–∞–≥–Ω–∏–π"

–ë–æ—Ç: "ü§î –ù–µ –º–æ–≥—É –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç –≤—ã –≤—ã–±—Ä–∞–ª–∏.
üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
1. –ú–∞–≥–Ω–∏–π –ü–ª—é—Å (Mg Plus)
2. –ú–∞–≥–Ω–∏–π –¢–∞–±—Å (Mg Tabs)
3. –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä (Mg-Evening)
4. –û–º–µ–≥–∞-3 –†—ã–±–∏–π –∂–∏—Ä (Omega-3 Fish oil)
üí¨ –ù–∞–ø–∏—à–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ —Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "1"
–ë–æ—Ç: [–ù–ï –û–¢–í–ï–ß–ê–ï–¢] ‚ùå
```

## üîç **–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω**

### **1. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**
–í `bot.py` —Å—Ç—Ä–æ–∫–∞ 299 —Ç—Ä–µ–±–æ–≤–∞–ª–∞, —á—Ç–æ–±—ã —Å–æ–æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ `reply_to_message`:
```python
if user_id in user_product_context and message.reply_to_message and len(text) < 50:
```
–ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±—ã—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–∏—à—É—Ç "1" –±–µ–∑ reply –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞.

### **2. –í—Ç–æ—Ä–∏—á–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**
–°–∏–Ω–æ–Ω–∏–º—ã –æ–º–µ–≥–∞-3 –≤–∫–ª—é—á–∞–ª–∏ —Å–ª–æ–≤–æ "–æ–º–µ–≥–∞", —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è:
```python
OMEGA_SYNONYMS = [
    "–æ–º–µ–≥–∞",  # ‚ùå –í—ã–∑—ã–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã
    "–æ–º–µ–≥–∞-3", "–æ–º–µ–≥–∞ 3", ...
]
```
–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ "–ü–æ—Å–æ–≤–µ—Ç—É–π –µ—â–µ –º–∞–≥–Ω–∏–π" —Å–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–ª–∞ –û–º–µ–≥–∞-3 –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º.

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ**

### **1. –£–±—Ä–∞–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ Reply (bot.py)**
**–ë—ã–ª–æ:**
```python
if user_id in user_product_context and message.reply_to_message and len(text) < 50:
```

**–°—Ç–∞–ª–æ:**
```python
if user_id in user_product_context and len(text) < 50:
```

### **2. –ò—Å–ø—Ä–∞–≤–∏–ª–∏ —Å–∏–Ω–æ–Ω–∏–º—ã –æ–º–µ–≥–∞-3 (enhanced_llm.py)**
**–ë—ã–ª–æ:**
```python
OMEGA_SYNONYMS = [
    "–æ–º–µ–≥–∞", "–æ–º–µ–≥–∞-3", "–æ–º–µ–≥–∞ 3", "–æ–º–µ–≥–∞3", ...
]
```

**–°—Ç–∞–ª–æ:**
```python
OMEGA_SYNONYMS = [
    "–æ–º–µ–≥–∞-3", "–æ–º–µ–≥–∞ 3", "–æ–º–µ–≥–∞3", ...  # –£–±—Ä–∞–ª–∏ "–æ–º–µ–≥–∞"
]
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **–¢–µ—Å—Ç 1: –í—ã–±–æ—Ä –ø–æ –Ω–æ–º–µ—Ä—É**
```
–í–≤–æ–¥: "1" -> ‚úÖ –í—ã–±—Ä–∞–Ω "–ú–∞–≥–Ω–∏–π –ü–ª—é—Å (Mg Plus)"
–í–≤–æ–¥: "2" -> ‚úÖ –í—ã–±—Ä–∞–Ω "–ú–∞–≥–Ω–∏–π –¢–∞–±—Å (Mg Tabs)"
–í–≤–æ–¥: "3" -> ‚úÖ –í—ã–±—Ä–∞–Ω "–ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä (Mg-Evening)"
–í–≤–æ–¥: "5" -> ‚ùå –ù–æ–º–µ—Ä –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ (–æ–∂–∏–¥–∞–µ–º–æ)
```

### **–¢–µ—Å—Ç 2: –°–∏–Ω–æ–Ω–∏–º—ã –æ–º–µ–≥–∞-3**
```
"–ü–æ—Å–æ–≤–µ—Ç—É–π –µ—â–µ –º–∞–≥–Ω–∏–π" -> ‚ùå –ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –æ–º–µ–≥–∞-3 ‚úÖ
"–æ–º–µ–≥–∞-3"              -> ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –æ–º–µ–≥–∞-3 ‚úÖ
"—Ä—ã–±–∏–π –∂–∏—Ä"            -> ‚úÖ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –æ–º–µ–≥–∞-3 ‚úÖ
"–æ–º–µ–≥–∞"                -> ‚ùå –ù–ï –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –æ–º–µ–≥–∞-3 ‚úÖ
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç**

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ—Å–æ–≤–µ—Ç—É–π –µ—â–µ –º–∞–≥–Ω–∏–π"

–ë–æ—Ç: [–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –º–∞–≥–Ω–∏—è –±–µ–∑ –æ–º–µ–≥–∞-3]

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "1"

–ë–æ—Ç: "üåø –ú–∞–≥–Ω–∏–π –ü–ª—é—Å (Mg Plus)
üìù –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–∏—â–µ–≤–∞—è –¥–æ–±–∞–≤–∫–∞ —Å –º–∞–≥–Ω–∏–µ–º...
[üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ]" ‚úÖ
```

## üîß **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**

1. **bot.py**
   - –£–±—Ä–∞–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ `message.reply_to_message` (—Å—Ç—Ä–æ–∫–∞ 299)
   - –£–ª—É—á—à–∏–ª–∏ –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–¥—É–∫—Ç–∞

2. **enhanced_llm.py**
   - –£–±—Ä–∞–ª–∏ "–æ–º–µ–≥–∞" –∏–∑ `OMEGA_SYNONYMS` (—Å—Ç—Ä–æ–∫–∞ 13)
   - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏–ª–∏ –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è

## üéØ **–ò—Ç–æ–≥**
‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞
‚úÖ –í—ã–±–æ—Ä –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –æ–º–µ–≥–∞-3 —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã
‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–±–∏—Ä–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ –Ω–æ–º–µ—Ä—É –±–µ–∑ reply

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: 2025-01-24*

