# üß≤ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ü–û–ò–°–ö–ê –ú–ê–ì–ù–ò–Ø

## üéØ **–ü—Ä–æ–±–ª–µ–º–∞**
–ë–æ—Ç –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª –ø—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º –∏ –æ—Ç–≤–µ—á–∞–ª "–≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö —Å –º–∞–≥–Ω–∏–µ–º", —Ö–æ—Ç—è –≤ –±–∞–∑–µ –µ—Å—Ç—å 3 –ø—Ä–æ–¥—É–∫—Ç–∞ —Å –º–∞–≥–Ω–∏–µ–º.

### **–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ—Å–æ–≤–µ—Ç—É–π –º–∞–≥–Ω–∏–π –∏ –∫–∞–ª—å—Ü–∏–π"

–ë–æ—Ç: "–•–æ—Ç—è –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –Ω–µ —É–∫–∞–∑–∞–Ω—ã –ø—Ä–æ–¥—É–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –º–∞–≥–Ω–∏–π, 
–≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö 
—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –º–∞–≥–Ω–∏—è." ‚ùå
```

## üîç **–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω**

### **1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ —Å–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–æ–º–ø—Ç–µ**
–í —Å–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–æ–º–ø—Ç–µ –±—ã–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫–∞–ª—å—Ü–∏—è, –Ω–æ –ù–ï –±—ã–ª–æ –¥–ª—è –º–∞–≥–Ω–∏—è:
```python
# –ë—ã–ª–æ —Ç–æ–ª—å–∫–æ —ç—Ç–æ:
5. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –æ –∫–∞–ª—å—Ü–∏–∏/–∫–æ—Å—Ç—è—Ö –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Ä–µ–∫–æ–º–µ–Ω–¥—É–π: –†—É–º–∞—Ä–∏–Ω –ö–∞–ª—å—Ü–∏–π, –ö–∞–ª—å—Ü–∏–π –ë–∞–Ω–∞–Ω, –ö–∞–ª—å—Ü–∏–π-–£—Ç—Ä–æ
# –ù–ï –±—ã–ª–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –º–∞–≥–Ω–∏—è ‚ùå
```

### **2. –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞**
- –ü–æ–∏—Å–∫ –ø–æ —Å–ª–æ–≤–∞–º "–ø—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º" –Ω–∞—Ö–æ–¥–∏–ª —Å–ª–æ–≤–æ "—Å" –≤–æ –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–∞–≤–∞–ª–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–∞–º
- –ü—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –≤–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞

### **3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω–æ–Ω–∏–º–æ–≤**
–°–∏—Å—Ç–µ–º–∞ –∏–º–µ–ª–∞ —Å–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è –æ–º–µ–≥–∞-3, –Ω–æ –Ω–µ –¥–ª—è –º–∞–≥–Ω–∏—è

## ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

### **1. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç** (`enhanced_llm.py`)
```python
6. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –æ –º–∞–≥–Ω–∏–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Ä–µ–∫–æ–º–µ–Ω–¥—É–π –í–°–ï –ø—Ä–æ–¥—É–∫—Ç—ã: 
   –ú–∞–≥–Ω–∏–π –ü–ª—é—Å (Mg Plus), –ú–∞–≥–Ω–∏–π –¢–∞–±—Å (Mg Tabs), –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä (Mg-Evening). 
   –ò–ì–ù–û–†–ò–†–£–ô –ª—é–±—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ë–ï–ó —Å–ª–æ–≤–∞ "–º–∞–≥–Ω–∏–π" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –æ –º–∞–≥–Ω–∏–∏
```

### **2. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è –º–∞–≥–Ω–∏—è** (`enhanced_llm.py`)
```python
MAGNESIUM_SYNONYMS = [
    "–º–∞–≥–Ω–∏–π", "–º–∞–≥–Ω–∏—è", "–º–∞–≥–Ω–∏–µ–º", "–º–∞–≥–Ω–∏—é", "magnesium", "mg",
    "–ø—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º", "—Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –º–∞–≥–Ω–∏–π", "—Å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º –º–∞–≥–Ω–∏—è"
]
```

### **3. –£–ª—É—á—à–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞** (`enhanced_llm.py`)

**–ò—Å–∫–ª—é—á–µ–Ω—ã —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–ª–æ–≤–∞:**
```python
stop_words = {"—Å", "–∏", "–¥–ª—è", "–Ω–∞", "–æ—Ç", "–ø–æ", "–≤", "–∫", ...}
terms = [t for t in query.split() if len(t) > 2 and t not in stop_words]
```

**–ü–æ–≤—ã—à–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞:**
```python
if field_name == "product":
    relevance_score += matches_in_field * 10  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
```

### **4. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏**
```python
def _expand_query_with_synonyms(self, query: str) -> str:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω–æ–Ω–∏–º—ã –º–∞–≥–Ω–∏—è
    for synonym in MAGNESIUM_SYNONYMS:
        if synonym in query_lower:
            expanded_terms = " ".join(MAGNESIUM_SYNONYMS)
            return f"{query} {expanded_terms}"
```

## üß™ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
"–ø—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º" -> ‚ùå "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö —Å –º–∞–≥–Ω–∏–µ–º"
"magnesium"         -> ‚ùå "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
"–º–∞–≥–Ω–∏–π"            -> ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```
"–ü–æ—Å–æ–≤–µ—Ç—É–π –º–∞–≥–Ω–∏–π –∏ –∫–∞–ª—å—Ü–∏–π"    -> ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –ú–∞–≥–Ω–∏–π –ü–ª—é—Å + –ú–∞–≥–Ω–∏–π –¢–∞–±—Å
"–ø—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º"            -> ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä  
"–º–∞–≥–Ω–∏–π –¥–ª—è –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã"    -> ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä
"—á—Ç–æ –ª—É—á—à–µ –º–∞–≥–Ω–∏–π –ø–ª—é—Å –∏–ª–∏ —Ç–∞–±—Å" -> ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –æ–±–∞ –ø—Ä–æ–¥—É–∫—Ç–∞
"magnesium"                     -> ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä
```

## üìä **–ü—Ä–æ–¥—É–∫—Ç—ã –º–∞–≥–Ω–∏—è –≤ –±–∞–∑–µ**

‚úÖ **–ú–∞–≥–Ω–∏–π –ü–ª—é—Å (Mg Plus)**
- ID: `mg_plus`
- URL: `https://aur-ora.com/catalog/vse_produkty/45477/`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–∏—â–µ–≤–∞—è –¥–æ–±–∞–≤–∫–∞ —Å –º–∞–≥–Ω–∏–µ–º, –∫–∞–ª–∏–µ–º –∏ –≤–∏—Ç–∞–º–∏–Ω–æ–º B6

‚úÖ **–ú–∞–≥–Ω–∏–π –¢–∞–±—Å (Mg Tabs)** 
- ID: `mg_tabs`
- URL: `https://aur-ora.com/catalog/vse_produkty/54104/`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ—Ä–æ—à–æ–∫ –∫–ª—É–±–Ω–∏–∫–∏ –ø—Ä–µ—Å—Å–æ–≤–∞–Ω–Ω—ã–π, –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–π –º–∞–≥–Ω–∏–µ–º

‚úÖ **–ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä (Mg-Evening)**
- ID: `mg_evening` 
- URL: `https://aur-ora.com/catalog/vse_produkty/696/`
- –û–ø–∏—Å–∞–Ω–∏–µ: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–∏—â–µ–≤–∞—è –¥–æ–±–∞–≤–∫–∞ —Å –º–∞–≥–Ω–∏–µ–º –¥–ª—è –≤–µ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–∏–µ–º–∞

## üîß **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**

### **enhanced_llm.py**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `MAGNESIUM_SYNONYMS` (—Å—Ç—Ä–æ–∫–∞ 20-23)
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `_expand_query_with_synonyms()` (—Å—Ç—Ä–æ–∫–∞ 364-370)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (—Å—Ç—Ä–æ–∫–∞ 72)
4. ‚úÖ –£–ª—É—á—à–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ `_fallback_local_search()` (—Å—Ç—Ä–æ–∫–∞ 730-732)
5. ‚úÖ –ü–æ–≤—ã—à–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—è –≤ `_search_in_kb()` (—Å—Ç—Ä–æ–∫–∞ 444-445)

## üéØ **–ò—Ç–æ–≥**

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞**
‚úÖ **–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ –º–∞–≥–Ω–∏–∏ —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥—è—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã**
‚úÖ **–ü—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –∏–º–µ—é—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞ "magnesium"**
‚úÖ **–°–∏–Ω–æ–Ω–∏–º—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**

### **–¢–µ–ø–µ—Ä—å –¥–∏–∞–ª–æ–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ—Å–æ–≤–µ—Ç—É–π –º–∞–≥–Ω–∏–π –∏ –∫–∞–ª—å—Ü–∏–π"

–ë–æ—Ç: "–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è –∫–æ—Å—Ç–µ–π –∏ –º—ã—à—Ü —Ä–µ–∫–æ–º–µ–Ω–¥—É—é:

üß≤ –ü—Ä–æ–¥—É–∫—Ç—ã —Å –º–∞–≥–Ω–∏–µ–º:
‚Ä¢ –ú–∞–≥–Ω–∏–π –ü–ª—é—Å (Mg Plus) - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–æ–±–∞–≤–∫–∞ —Å –∫–∞–ª–∏–µ–º –∏ B6
‚Ä¢ –ú–∞–≥–Ω–∏–π –¢–∞–±—Å (Mg Tabs) - –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–π –º–∞–≥–Ω–∏–µ–º —Å –∫–ª—É–±–Ω–∏–∫–æ–π
‚Ä¢ –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä (Mg-Evening) - –¥–ª—è –≤–µ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–∏–µ–º–∞

ü¶¥ –ü—Ä–æ–¥—É–∫—Ç—ã —Å –∫–∞–ª—å—Ü–∏–µ–º:
‚Ä¢ –†—É–º–∞—Ä–∏–Ω –ö–∞–ª—å—Ü–∏–π - –º–æ—Ä—Å–∫–æ–π –∫–æ–º–ø–ª–µ–∫—Å
‚Ä¢ –ö–∞–ª—å—Ü–∏–π-–£—Ç—Ä–æ - —Å –≤–∏—Ç–∞–º–∏–Ω–∞–º–∏ D3 –∏ –≥—Ä—É–ø–ø—ã B

–ù—É–∂–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ –∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤?" ‚úÖ
```

---
*–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ: 2025-01-24*

