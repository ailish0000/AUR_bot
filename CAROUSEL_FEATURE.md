# üåü –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–∞—Ä—É—Å–µ–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å **–∫–∞—Ä—É—Å–µ–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –±–æ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å—Å—ã–ª–∫–∏.

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –£—Å–ª–æ–≤–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:
- –ë–æ—Ç –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø—Ä–∏—Å–ª–∞—Ç—å —Å—Å—ã–ª–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ø—Ä–∏—à–ª–∏ —Å—Å—ã–ª–∫—É", "–¥–∞–π —Å—Å—ã–ª–∫—É")

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ:
- **–û–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç** ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ"
- **–ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤** ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä—É—Å–µ–ª—å —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

## üéÆ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞—Ä—É—Å–µ–ª–∏

### –ö–Ω–æ–ø–∫–∏:
- **üìñ –ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ** - –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç
- **‚¨ÖÔ∏è –ù–∞–∑–∞–¥** - –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–æ–¥—É–∫—Ç –≤ –∫–∞—Ä—É—Å–µ–ª–∏
- **1/3** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∑–∏—Ü–∏–∏ (—Ç–µ–∫—É—â–∏–π/–≤—Å–µ–≥–æ)
- **–í–ø–µ—Ä–µ–¥ ‚û°Ô∏è** - —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–æ–¥—É–∫—Ç –≤ –∫–∞—Ä—É—Å–µ–ª–∏

### –ù–∞–≤–∏–≥–∞—Ü–∏—è:
- –¶–∏–∫–ª–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–π ‚Üí –ø–µ—Ä–≤—ã–π, –ø–µ—Ä–≤—ã–π ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞—Ä—É—Å–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üíª –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```python
# –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –∫–∞—Ä—É—Å–µ–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
user_product_carousels = {}  # user_id: {"products": [...], "current_index": 0, "message_id": ...}
```

### –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **`send_product_carousel()`** - —Å–æ–∑–¥–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞—Ä—É—Å–µ–ª—å
2. **`update_product_carousel()`** - –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–∞—Ä—É—Å–µ–ª—å –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
1. **`handle_carousel_prev()`** - –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
2. **`handle_carousel_next()`** - –∫–Ω–æ–ø–∫–∞ "–í–ø–µ—Ä–µ–¥"
3. **`handle_carousel_info()`** - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–∑–∏—Ü–∏–∏

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–¥–∏–Ω –ø—Ä–æ–¥—É–∫—Ç
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ú–Ω–µ –Ω—É–∂–µ–Ω –º–∞–≥–Ω–∏–π"
–ë–æ—Ç: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –ú–∞–≥–Ω–∏–π-–í–µ—á–µ—Ä
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü—Ä–∏—à–ª–∏ —Å—Å—ã–ª–∫—É"
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Å–∞–π—Ç–µ"
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ß—Ç–æ –ø–æ—Å–æ–≤–µ—Ç—É–µ—à—å –¥–ª—è –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞?"
–ë–æ—Ç: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç 3 –ø—Ä–æ–¥—É–∫—Ç–∞ (–ê—Ä–≥–µ–Ω—Ç –ú–∞–∫—Å, –°–æ–ª–±–µ—Ä—Ä–∏, –í–∏—Ç–∞–º–∏–Ω –°)
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü—Ä–∏—à–ª–∏ —Å—Å—ã–ª–∫–∏"
–ë–æ—Ç: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞—Ä—É—Å–µ–ª—å —Å 3 –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
```

## üîß –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```python
if len(found_products) == 1:
    # –û–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ–¥–Ω–∏–º –ø—Ä–æ–¥—É–∫—Ç–æ–º
    send_single_product()
else:
    # –ö–∞—Ä—É—Å–µ–ª—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
    await send_product_carousel(message, found_products, user_id)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:
```python
# –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ
if isinstance(context_products, list) and len(context_products) > 1:
    found_products = context_products
else:
    found_products = [context_product]
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–¥–æ–±—Å—Ç–≤–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏
2. **–í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫–∞—Ä—É—Å–µ–ª—å –≤—ã–≥–ª—è–¥–∏—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ—Å—Ç—å** - –ø–æ–º–Ω–∏—Ç –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã
5. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç

## üöÄ –°—Ç–∞—Ç—É—Å

**‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ö–∞—Ä—É—Å–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É –Ω–∏–º–∏.

